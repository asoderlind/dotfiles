#!/bin/bash

batstatus=" "
for bat in /sys/class/power_supply/BAT?; do

      cap="$(<$bat/capacity)"
      stat="$(<$bat/status)"
  
  i=""
  c="#a3bc8c"

  if [ "$stat" = "Charging" ]; then
    i=""
  elif [ "$stat" = "Not charging" ]; then
    i=""
  elif [ "$cap" -le 18 ]; then
    dunstify -h string:x-dunst-stack-tag:test "Battery level critical!" "Connect to a charger asap"
    i=""
    c="#bf616a"
  elif [ "$cap" -le 24 ]; then
    i=""
    c="#bf616a"
  elif [ "$cap" -le 34 ]; then
    i=""
    c="#d08770"
  elif [ "$cap" -le 44 ]; then
    i=""
    c="#d08770"
  elif [ "$cap" -le 54 ]; then
    i=""
    c="#ebcb8b"
  elif [ "$cap" -le 64 ]; then
    i=""
    c="#ebcb8b"
  elif [ "$cap" -le 74 ]; then
    i=""
    c="#a3bc8c"
  elif [ "$cap" -le 84 ]; then
    i=""
    c="#a3bc8c"
  elif [ "$cap" -le 94 ]; then
    c="#a3bc8c"
    i=""
  fi
  batstatus="^c${c}^${i} ${cap}%"
done

echo "${batstatus}"
